---
sidebar_position: 1
title: Agent Runtimes
slug: /
---

import DocCardList from '@theme/DocCardList';
import { useDocsSidebar } from '@docusaurus/plugin-content-docs/client';

# ğŸ¤– ğŸƒğŸ»â€â™‚ï¸â€â¡ï¸ Agent Runtimes

**Agent Runtimes** is a flexible framework for building and deploying AI agents with multiple transport protocols, model providers, and MCP integrations.

## Package Scope

Agent Runtimes is the **top-level orchestration layer** in the Datalayer AI stack:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     agent-runtimes                          â”‚  â—€â”€â”€ You are here
â”‚            (Agent hosting, protocols, UI)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      agent-codemode      â”‚         agent-skills             â”‚
â”‚  (discovery, codegen)    â”‚     (skills management)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    code-sandboxes                           â”‚
â”‚          (Safe code execution environment)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Responsibilities:**
- âœ… Agent hosting and lifecycle management
- âœ… Multiple transport protocols (AG-UI, Vercel AI, ACP, A2A)
- âœ… Model provider integration (Anthropic, OpenAI, Azure, Bedrock)
- âœ… MCP server management and tool routing
- âœ… React UI components (ChatBase, ChatSidebar, ChatFloating)
- âœ… Extensions (A2UI, MCP-UI, MCP Apps)
- âœ… Integration layer for agent-codemode and agent-skills

**Not Responsible For:**
- âŒ MCP tool binding generation (â†’ agent-codemode)
- âŒ Skill CRUD and lifecycle (â†’ agent-skills)
- âŒ Raw code execution (â†’ code-sandboxes)

## Overview

Agent Runtimes provides:

- ğŸ”Œ **Multiple Transport Protocols** â€” Connect via AG-UI, Vercel AI, ACP (WebSocket), or A2A for agent-to-agent communication
- ğŸ¤– **Multi-Provider Model Support** â€” Use models from Anthropic, OpenAI, Azure OpenAI, or AWS Bedrock
- ğŸ› ï¸ **MCP Integration** â€” Connect to Model Context Protocol servers for extended capabilities
- ğŸ“¡ **Streaming Responses** â€” Real-time streaming for responsive chat experiences
- ğŸ”„ **Per-Request Model Selection** â€” Switch models dynamically without restarting agents
- ğŸ¨ **Ready-to-Use UI Components** â€” React components for building chat interfaces
- ğŸ§© **Extensions** â€” A2UI, MCP-UI, and MCP Apps support for rich UI experiences

## Integration with Other Packages

Agent Runtimes provides an integration layer for the other packages:

```python
from agent_runtimes.integrations.codemode import CodemodeIntegration

# Initialize with agent-runtimes MCP infrastructure
integration = CodemodeIntegration()
await integration.setup()

# Access agent-codemode features
result = await integration.execute_code('''
    from generated.servers.filesystem import read_file
    content = await read_file({"path": "/data.txt"})
    print(content)
''')

# Access agent-skills features
skills = integration.list_skills()
result = await integration.execute_skill("data-analyzer", {"path": "/data.csv"})
```

## Quick Start

```bash
# Install
pip install agent-runtimes

# Start the server
python -m agent_runtimes
```

## Agent Specs (agentspecs)

Agent Runtimes pulls agent, MCP server, skill, and env var specs from the
[agentspecs](https://github.com/datalayer/agentspecs) repository. The specs are
cloned locally and used to generate the runtime catalogs.

See the [Agent Specs](/agentspecs/) guide for details on cloning and generation.

```bash
# Clone or update agentspecs and regenerate catalogs
make specs
```

This command:
- Clones the agentspecs repository into ./agentspecs (or pulls updates)
- Generates Python and TypeScript catalogs for agents, MCP servers, skills, and env vars

If you already have agentspecs checked out elsewhere, copy or symlink it to
./agentspecs before running make specs.

Configure your model provider:

```bash
# Choose one (or more) providers
export ANTHROPIC_API_KEY="sk-ant-..."
export OPENAI_API_KEY="sk-..."
export AZURE_OPENAI_API_KEY="..."
export AZURE_OPENAI_ENDPOINT="https://your-resource.openai.azure.com"
```

## Key Components

### API Endpoints

Agent Runtimes exposes a comprehensive REST API:

| Endpoint | Description |
|----------|-------------|
| `POST /api/v1/agents/{id}/prompt` | Send prompts with streaming response |
| `GET /api/v1/agents` | List all available agents |
| `GET /api/v1/configure/mcp-toolsets-status` | Check MCP server status |
| `GET /api/v1/configure/config` | Get system configuration |

See the [API Endpoints](/api-endpoints) documentation for the full API reference.

### MCP Integration

Connect to MCP servers for tools like web search, file access, and more:

```yaml
mcp_servers:
  - name: tavily
    command: uvx
    args: ["mcp-server-tavily"]
    env:
      TAVILY_API_KEY: "${TAVILY_API_KEY}"
```

MCP servers are managed with:
- **Automatic retry** â€” 3 attempts with exponential backoff
- **Health monitoring** â€” Status endpoint for checking server readiness
- **Graceful shutdown** â€” Clean resource management on exit

See the [MCP Servers](/mcp-servers) documentation for configuration details.

### Extensions

| Extension | Purpose |
|-----------|---------|
| **A2UI** | Agent-to-UI bidirectional communication |
| **MCP-UI** | Browse and execute MCP tools |
| **MCP Apps** | Full application experiences via MCP |

See the [Extensions](/extensions) documentation for integration guides.

## Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Frontend (React)                         â”‚
â”‚        ChatBase, Protocol Adapters, UI Components           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â†“                     â†“                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    AG-UI      â”‚   â”‚   Vercel AI   â”‚   â”‚     ACP       â”‚
â”‚   Transport   â”‚   â”‚   Transport   â”‚   â”‚   Transport   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                     â”‚                     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Agent Framework                           â”‚
â”‚           Pydantic AI (+ more based on feedback)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â†“                                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Model Providers      â”‚         â”‚      MCP Servers        â”‚
â”‚ Anthropic, OpenAI, etc. â”‚         â”‚ Tavily, Fetch, Custom   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Built on Pydantic AI

Agent Runtimes is currently built on top of [Pydantic AI](https://ai.pydantic.dev), a powerful Python agent framework that provides:

- **Type-safe agents** â€” Full type checking with Pydantic models
- **Structured outputs** â€” Reliable JSON responses from LLMs
- **Tool calling** â€” First-class support for function tools and MCP
- **Multi-model support** â€” Anthropic, OpenAI, Google, and more

:::note Community-Driven Expansion
We've chosen Pydantic AI as our initial foundation, but we're open to expanding support for other agent frameworks based on community feedback. If you'd like to see support for **Google ADK**, **LangChain**, **CrewAI**, or other frameworks, please [open a discussion](https://github.com/datalayer/agent-runtimes/discussions) or contribute!
:::

## Features at a Glance

| Feature | Description |
|---------|-------------|
| **Transports** | AG-UI, Vercel AI, ACP (WebSocket), A2A |
| **Model Providers** | Anthropic, OpenAI, Azure OpenAI, AWS Bedrock |
| **Agent Framework** | Pydantic AI (more frameworks based on community feedback) |
| **MCP Servers** | Tavily, Fetch, custom servers |
| **Extensions** | A2UI, MCP-UI, MCP Apps |
| **Streaming** | Real-time SSE and WebSocket streaming |
| **UI** | React components with Primer design system |

## Documentation

<DocCardList items={useDocsSidebar().items.filter(i => (i.label !== 'Agent Runtimes'))} />
